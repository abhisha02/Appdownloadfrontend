{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toast}from'sonner';import api from'../../services/api';// Adjust the path as needed\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ScreenshotApprovalModal=_ref=>{let{isOpen,onClose}=_ref;const[tasks,setTasks]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{if(isOpen){fetchSubmittedTasks();}},[isOpen]);const fetchSubmittedTasks=async()=>{try{const response=await api.get('apps/tasks/submitted/');setTasks(response.data);}catch(error){console.error('Error fetching tasks:',error);toast.error('Failed to fetch submitted tasks');}finally{setLoading(false);}};const handleStatusUpdate=async(taskId,newStatus)=>{try{await api.patch(\"apps/tasks/\".concat(taskId,\"/update-status/\"),{status:newStatus});toast.success(\"Task \".concat(newStatus.toLowerCase(),\" successfully\"));fetchSubmittedTasks();}catch(error){console.error('Error updating task:',error);toast.error('Failed to update task status');}};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 dark:text-gray-200\",children:\"Screenshot Approvals\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200\",children:\"\\xD7\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-700 dark:text-gray-200 py-4\",children:\"Loading...\"}):tasks.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-700 dark:text-gray-200 py-4\",children:\"No tasks pending approval\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:tasks.map(task=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-900 dark:text-gray-200 font-semibold\",children:task.app.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:[\"User: \",task.user_first_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:[\"Submitted: \",new Date(task.submitted_at).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate(task.id,'APPROVED'),className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-300\",children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate(task.id,'REJECTED'),className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-300\",children:\"Reject\"})]})]}),task.screenshot&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"img\",{src:task.screenshot,alt:\"Task Screenshot\",className:\"w-64 h-48 object-cover rounded-lg\"})})]},task.id))})]})});};export default ScreenshotApprovalModal;","map":{"version":3,"names":["React","useState","useEffect","toast","api","jsx","_jsx","jsxs","_jsxs","ScreenshotApprovalModal","_ref","isOpen","onClose","tasks","setTasks","loading","setLoading","fetchSubmittedTasks","response","get","data","error","console","handleStatusUpdate","taskId","newStatus","patch","concat","status","success","toLowerCase","className","children","onClick","length","map","task","app","name","user_first_name","Date","submitted_at","toLocaleString","id","screenshot","src","alt"],"sources":["D:/AndroidAppdownloadportalApp/Andoridappdownloadfrontend/Appdownload/src/components/Admin/ScreenshotApprovalModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'sonner';\r\nimport api from '../../services/api'; // Adjust the path as needed\r\n\r\nconst ScreenshotApprovalModal = ({ isOpen, onClose }) => {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchSubmittedTasks();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const fetchSubmittedTasks = async () => {\r\n    try {\r\n      const response = await api.get('apps/tasks/submitted/');\r\n      setTasks(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching tasks:', error);\r\n      toast.error('Failed to fetch submitted tasks');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusUpdate = async (taskId, newStatus) => {\r\n    try {\r\n      await api.patch(`apps/tasks/${taskId}/update-status/`, {\r\n        status: newStatus\r\n      });\r\n      toast.success(`Task ${newStatus.toLowerCase()} successfully`);\r\n      fetchSubmittedTasks();\r\n    } catch (error) {\r\n      console.error('Error updating task:', error);\r\n      toast.error('Failed to update task status');\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 dark:text-gray-200\">Screenshot Approvals</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200\"\r\n          >\r\n            Ã—\r\n          </button>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"text-center text-gray-700 dark:text-gray-200 py-4\">Loading...</div>\r\n        ) : tasks.length === 0 ? (\r\n          <div className=\"text-center text-gray-700 dark:text-gray-200 py-4\">No tasks pending approval</div>\r\n        ) : (\r\n          <div className=\"space-y-6\">\r\n            {tasks.map((task) => (\r\n              <div key={task.id} className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-start mb-4\">\r\n                  <div>\r\n                    <h3 className=\"text-gray-900 dark:text-gray-200 font-semibold\">{task.app.name}</h3>\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">User: {task.user_first_name}</p>\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">Submitted: {new Date(task.submitted_at).toLocaleString()}</p>\r\n                  </div>\r\n                  <div className=\"flex space-x-2\">\r\n                    <button\r\n                      onClick={() => handleStatusUpdate(task.id, 'APPROVED')}\r\n                      className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-300\"\r\n                    >\r\n                      Accept\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleStatusUpdate(task.id, 'REJECTED')}\r\n                      className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-300\"\r\n                    >\r\n                      Reject\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                {task.screenshot && (\r\n                  <div className=\"mt-4\">\r\n                    <img\r\n                      src={task.screenshot}\r\n                      alt=\"Task Screenshot\"\r\n                      className=\"w-64 h-48 object-cover rounded-lg\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScreenshotApprovalModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}